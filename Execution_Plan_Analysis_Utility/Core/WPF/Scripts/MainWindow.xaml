<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SQL Server Execution Plan Analysis Utility"
        Height="800" Width="1400"
        Icon="../Assets/icons8-communication-64.png"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize"
        Background="#f4f4f4">

    <!-- Window Resources for Styles (MUST be before Grid) -->
    <Window.Resources>
        <Style x:Key="ToolbarButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Width" Value="42"/>
            <Setter Property="Height" Value="42"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="3"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#6BA3E8"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#2E7DD1"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>  <!-- Header -->
            <RowDefinition Height="Auto"/>  <!-- Toolbar -->
            <RowDefinition Height="*"/>     <!-- Main content -->
        </Grid.RowDefinitions>

        <!-- HEADER -->
        <Grid Grid.Row="0" Background="White" Margin="0,0,0,5">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="10,5">
                <Image Source="../Assets/icons8-communication-64.png"
                       Width="48" Height="48"
                       Stretch="Uniform"
                       RenderOptions.BitmapScalingMode="HighQuality"/>
                <TextBlock Text="SQL Server Execution Plan Analysis Utility"
                           FontSize="18" FontWeight="Bold"
                           VerticalAlignment="Center"
                           Margin="10,0,0,0"/>
            </StackPanel>
            <TextBlock Text="Last Updated: 2025-12-29"
                       FontSize="10"
                       Foreground="#666666"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Right"
                       Margin="0,0,10,0"/>
        </Grid>

        <!-- TOOLBAR -->
        <Border Grid.Row="1" Background="#4A90E2" Padding="5" Margin="0,0,0,5">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                
                <!-- Configuration Management Section -->
                <Border BorderBrush="#6BA3E8" BorderThickness="0,0,1,0" Padding="5,0">
                    <StackPanel Orientation="Horizontal">
                        <Button x:Name="btnLoadSourceTarget"
                                ToolTip="Load Execution Plans"
                                Style="{StaticResource ToolbarButtonStyle}">
                            <Image Source="C:\Advanced_SQL_Server_Toolkit\Execution_Plan_Analysis_Utility\Core\WPF\Assets\icons8-folder-50.png" Width="32" Height="32"/>
                        </Button>

                        <Button x:Name="btnCheckForNewPlans"
                                ToolTip="Reload Directory"
                                Style="{StaticResource ToolbarButtonStyle}">
                            <Image Source="C:\Advanced_SQL_Server_Toolkit\Execution_Plan_Analysis_Utility\Core\WPF\Assets\icons8-refresh-50.png" Width="32" Height="32"/>
                        </Button>

                        <Button x:Name="btnLoadConfiguration"
                                ToolTip="Load Configuration"
                                Style="{StaticResource ToolbarButtonStyle}">
                            <Image Source="C:\Advanced_SQL_Server_Toolkit\Execution_Plan_Analysis_Utility\Core\WPF\Assets\icons8-task-list-50.png" Width="32" Height="32"/>
                        </Button>

                        <Button x:Name="btnSaveExecutionPlanConfiguration"
                                ToolTip="Save Configuration"
                                Style="{StaticResource ToolbarButtonStyle}">
                            <Image Source="C:\Advanced_SQL_Server_Toolkit\Execution_Plan_Analysis_Utility\Core\WPF\Assets\icons8-save-50.png" Width="32" Height="32"/>
                        </Button>
                    </StackPanel>
                </Border>

                <!-- Analysis Section -->
                <Border BorderBrush="#6BA3E8" BorderThickness="0,0,1,0" Padding="5,0">
                    <StackPanel Orientation="Horizontal">
                        <Button x:Name="btnCompareExecutionPlans"
                                ToolTip="Compare Execution Plans"
                                Style="{StaticResource ToolbarButtonStyle}">
                            <Image Source="C:\Advanced_SQL_Server_Toolkit\Execution_Plan_Analysis_Utility\Core\WPF\Assets\icons8-compare-50.png" Width="32" Height="32"/>
                        </Button>

                        <Button x:Name="btnAnalyzeIndividualPlans"
                                ToolTip="Analyze Individual Plans"
                                Style="{StaticResource ToolbarButtonStyle}">
                            <Image Source="C:\Advanced_SQL_Server_Toolkit\Execution_Plan_Analysis_Utility\Core\WPF\Assets\icons8-analyze-50.png" Width="32" Height="32"/>
                        </Button>
                    </StackPanel>
                </Border>

                <!-- File Management Section -->
                <Border BorderBrush="#6BA3E8" BorderThickness="0,0,1,0" Padding="5,0">
                    <StackPanel Orientation="Horizontal">
                        <Button x:Name="btnOpenOutputFolder"
                                ToolTip="Open Output Folder"
                                Style="{StaticResource ToolbarButtonStyle}">
                            <Image Source="C:\Advanced_SQL_Server_Toolkit\Execution_Plan_Analysis_Utility\Core\WPF\Assets\icons8-opened-folder-50.png" Width="32" Height="32"/>
                        </Button>

                        <Button x:Name="btnCleanup"
                                ToolTip="Cleanup"
                                Style="{StaticResource ToolbarButtonStyle}">
                            <Image Source="C:\Advanced_SQL_Server_Toolkit\Execution_Plan_Analysis_Utility\Core\WPF\Assets\icons8-delete-50.png" Width="32" Height="32"/>
                        </Button>

                        <Button x:Name="btnBackupConfigurations"
                                ToolTip="Backup Configurations"
                                Style="{StaticResource ToolbarButtonStyle}">
                            <Image Source="C:\Advanced_SQL_Server_Toolkit\Execution_Plan_Analysis_Utility\Core\WPF\Assets\icons8-zip-50.png" Width="32" Height="32"/>
                        </Button>
                    </StackPanel>
                </Border>

                <!-- Help Section -->
                <Border Padding="5,0">
                    <StackPanel Orientation="Horizontal">
                        <Button x:Name="btnGitHub"
                                ToolTip="View on GitHub"
                                Style="{StaticResource ToolbarButtonStyle}">
                            <Image Source="C:\Advanced_SQL_Server_Toolkit\Execution_Plan_Analysis_Utility\Core\WPF\Assets\icons8-github-50.png" Width="32" Height="32"/>
                        </Button>
                    </StackPanel>
                </Border>

            </StackPanel>
        </Border>

        <!-- MAIN CONTENT -->
        <Grid Grid.Row="2" Margin="10,0,10,10">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>      <!-- DataGrid -->
                <RowDefinition Height="Auto"/>   <!-- Splitter -->
                <RowDefinition Height="300"/>    <!-- Description TextBox -->
            </Grid.RowDefinitions>

            <!-- DataGrid -->
            <DataGrid x:Name="ExecutionPlanGridView"
                      Grid.Row="0"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      IsReadOnly="False"
                      HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch"
                      SelectionMode="Single"
                      SelectionUnit="FullRow"
                      Focusable="True">

                <DataGrid.Columns>
                    <DataGridTextColumn Header="ID" Binding="{Binding ID}" Width="Auto" IsReadOnly="True" />
                    <DataGridTextColumn Header="Plan Name" Binding="{Binding Name, UpdateSourceTrigger=PropertyChanged}" Width="Auto" IsReadOnly="False" />
                    <DataGridTextColumn Header="File Name" Binding="{Binding 'File Name'}" Width="Auto" IsReadOnly="True" />
                    <DataGridCheckBoxColumn Header="Active" Binding="{Binding Active, UpdateSourceTrigger=PropertyChanged}" Width="Auto" />
                    <DataGridTextColumn Header="Full Path" Binding="{Binding FullPath}" Width="*" IsReadOnly="True" />
                </DataGrid.Columns>

                <DataGrid.Resources>
                    <Style TargetType="DataGridRow">
                        <Setter Property="Background" Value="White"/>
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="#4A90E2"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>

                    <Style TargetType="DataGridCell">
                        <Setter Property="BorderThickness" Value="0"/>
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="#4A90E2"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.Resources>
            </DataGrid>

            <!-- GridSplitter -->
            <GridSplitter Grid.Row="1"
                          Height="5"
                          HorizontalAlignment="Stretch"
                          VerticalAlignment="Center"
                          Background="#CCCCCC"
                          ShowsPreview="True"/>

            <!-- Description Section -->
            <Border Grid.Row="2"
                    BorderBrush="Black"
                    BorderThickness="1"
                    Padding="5"
                    Background="White">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,5">
                        <TextBlock Text="Description / Notes:"
                                   FontWeight="Bold"
                                   VerticalAlignment="Center"/>
                        <Button x:Name="btnSaveDescription"
                                Content="Save Description"
                                Margin="10,0,0,0"
                                Padding="10,2"
                                Background="#4A90E2"
                                Foreground="White"
                                FontWeight="Bold"
                                Cursor="Hand"/>
                    </StackPanel>

                    <TextBox x:Name="txtDescription"
                             Grid.Row="1"
                             TextWrapping="Wrap"
                             AcceptsReturn="True"
                             VerticalScrollBarVisibility="Auto"
                             HorizontalScrollBarVisibility="Auto"
                             FontFamily="Consolas"
                             FontSize="12"
                             Padding="5"/>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>


